// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.

$(function(){
  if($("[data-id='rendezvous-page']").length > 0) {
    $("[data-id='update-rendezvous-form-group'] button").on('click', function(e){
      e.preventDefault();

      display_error_name_submission_error = function(element){
        var input_group = $(this).closest('.form-group');
        input_group.addClass('has-error');
        input_group.find('.help-block:hidden').removeClass('hidden');
      }

      users_game_name = $(this).closest('.form-group').find('input').val();

      // user submitted a games_user_name
      if( users_game_name.length > 0)
      {
        $(this).attr('disabled', 'disabled'); //disable go button

        $form = $(this).closest('form')
        url = $form.attr('action')

        App.rendezvous.join_game(users_game_name);

        $('[data-id=update-rendezvous-group-col]').addClass('hidden')
        $('[data-id=rendezvous-start-game-button-container]').removeClass('hidden')
      }
      else
      {
        display_error_name_submission_error($this)
      }
    });
  }

  $("[data-id='leave_game_link']").click(function(e){
    e.preventDefault();
    App.rendezvous.unjoin_game();
    window.location = this.getAttribute('href');
  });
});
